<form class="message-form" id="messageForm">
  <h3 style="text-align: center; margin-bottom: 1.5rem; color: #c084fc;">Share Your Thoughts (Optional)</h3>

  <div class="form-group">
    <label for="username">How shall I address you?</label>
    <input type="text" id="username" name="username" placeholder="Your chosen name...">
  </div>

  <div class="form-group">
    <label for="message">Confess your thoughts</label>
    <textarea id="message" name="message" rows="4" placeholder="Tell me what draws you here. What do you seek from me?"></textarea>
  </div>

  <div class="form-group">
    <label for="motivation">What compels your devotion?</label>
    <input type="text" id="motivation" name="motivation" placeholder="Power? Control? The thrill of surrender?">
  </div>

  <button type="submit" id="submitBtn" style="width: 100%; padding: 1rem; background: linear-gradient(45deg, #9333ea, #ec4899); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">
    Submit Message
  </button>

  <!-- Fallback for no-JS users -->
  <noscript>
    <div style="margin-top: 1rem; padding: 1rem; background: rgba(255, 255, 255, 0.1); border-radius: 8px; text-align: center;">
      <p style="margin-bottom: 1rem; color: #c084fc;">JavaScript is required for form submission.</p>
      <a href="https://t.me/valoravault_bot" target="_blank" style="color: #ec4899; text-decoration: none; font-weight: bold;">
        ðŸ’¬ Contact me directly on Telegram instead
      </a>
    </div>
  </noscript>
</form>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('messageForm');
    const submitButton = document.getElementById('submitBtn');

    form.addEventListener('submit', async (event) => {
      event.preventDefault();

      const formData = new FormData(form);
      const data = {
        username: formData.get('username') || 'Anonymous',
        message: formData.get('message') || 'No message',
        motivation: formData.get('motivation') || 'Not specified',
        timestamp: new Date().toISOString(),
        referrer: document.referrer || 'Direct'
      };

      submitButton.innerHTML = '<span class="loading-spinner"></span>Sending to Telegram...';
      submitButton.disabled = true;

      try {
        const response = await fetch('https://api.telegram.org/bot7572576224:AAF7HGD_1bqhzHSgOEkK_9Z7YK2VxcVGudY/sendMessage', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: '5661776474',
            text: `âœ¨ New Tribute Submission\nName: ${data.username}\nMessage: ${data.message}\nMotivation: ${data.motivation}\nTime: ${new Date(data.timestamp).toLocaleString()}\nSource: ${data.referrer}`,
            parse_mode: 'HTML'
          })
        });

        const result = await response.json();
        if (result.ok) {
          alert('Message sent successfully âœ¨');
        } else {
          alert('Message failed: ' + result.description);
        }
      } catch (err) {
        console.error('Telegram API error:', err);
        alert('Something went wrong. Try again later.');
      } finally {
        form.reset();
        submitButton.innerHTML = 'Submit Message';
        submitButton.disabled = false;
      }
    });
  });
</script>
